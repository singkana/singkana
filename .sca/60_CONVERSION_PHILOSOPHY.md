# SingKANA変換の思想

## 基本方針

SingKANAは「歌えるカタカナ」を生成する。  
「正しい」では足りない。「歌える」「気持ちいい」「原曲に近い」が必要。

---

## 1. 変換の優先順位（何を優先し、何を捨てるか）

### 優先するもの

1. **歌いやすさ**
   - 母音の伸ばし方（例: `you` → `ユー`、`me` → `ミー`）
   - 子音の落とし方（例: `want you` → `ワンチュ`）
   - ブレス位置（スペース区切りで明示）

2. **原曲への近さ**
   - 英語の「フェイク発音」を尊重（例: `wanna` → `ワナ`、`gonna` → `ゴナ`）
   - 歌詞特有の崩しを反映（例: `singing` → `シンギン`）

3. **視認性**
   - 1文字ごとにスペース区切り（例: `ユ ー` ではなく `ユー`）
   - カタカナ統一（ひらがな混在を排除）

### 捨てるもの

1. **厳密な音韻論**
   - 英語の正しい発音規則は無視
   - 「なんちゃって日本語読み」を採用

2. **記号の装飾性**
   - アポストロフィ（`'` / `'`）は削除
   - コロン（`:` / `：`）は削除
   - 歌詞には不要な記号は排除

3. **多言語の厳密性**
   - 韓国語は簡易ローマ字経由で変換
   - 日本語行はそのまま（変換しない）

---

## 2. 変換アルゴリズムの思想

### 2.1 英語→カタカナ変換の流れ

```
英語歌詞
  ↓
① フェイク発音ルール適用（want you → wanchu）
  ↓
② 単語ごとに分割・処理
  ↓
③ 単語優先変換（WORD_OVERRIDES）またはローマ字→ひらがな
  ↓
④ 促音処理（happy → ハッピー）
  ↓
⑤ スペース区切り（1文字ごと）
  ↓
⑥ カタカナ統一
  ↓
歌えるカタカナ
```

### 2.2 フェイク発音ルール（歌詞特化）

**目的**: 英語歌詞の「崩れた発音」を尊重する

- `want you` → `wanchu`
- `wanna` → `wana`
- `gonna` → `gona`
- `got you` → `gotchu`
- `don't you` → `donchu`
- `-ing` → `-in`（`singing` → `singin`）

**思想**: 歌詞では「正しい発音」より「実際に歌われる発音」を優先

### 2.3 単語優先変換（WORD_OVERRIDES）

**目的**: 頻出語を「歌いやすい形」に固定

例:
- `you` → `ユー`（伸ばす）
- `me` → `ミー`（伸ばす）
- `alone` → `アローン`（歌いやすい長音）

**思想**: 頻出語は「正しさ」より「歌いやすさ」を優先

### 2.4 促音処理

**目的**: 重子音を「っ」で表現

- `happy` → `ハッピー`（`pp` → `っ`）
- `better` → `ベッター`（`tt` → `っ`）

**思想**: 英語の子音連続を日本語の促音で表現

### 2.5 スペース区切り

**目的**: ブレス位置を明示

- `ユー` → `ユ ー`（1文字ごと）
- `ワンチュ` → `ワ ン チュ`（1文字ごと）

**思想**: 歌うときの「区切り」を視覚化

### 2.6 カタカナ統一

**目的**: ひらがな混在を排除

- すべてカタカナに統一
- `ゔ` → `ヴ`（特殊文字の統一）

**思想**: 視認性と一貫性を優先

---

## 3. 多言語対応の思想

### 3.1 英語

- **変換する**: アルファベットを含む行
- **変換しない**: 記号・数字のみの行

### 3.2 韓国語

- **変換する**: ハングル → ローマ字（簡易） → カタカナ
- **思想**: 厳密な音韻論より「歌いやすさ」を優先

### 3.3 日本語

- **変換しない**: 日本語行はそのまま
- **思想**: 既に「歌える形」なので変換不要

---

## 4. 無料とProの違い（理解制限）

### 無料

- **体験**: 「なるほど、こう変わるのか」
- **制限**: 基本変換のみ（`basic` モード）

### Pro

- **体験**: 「これじゃないと歌えない」
- **機能**: 全モード利用可能（`basic`, `romaji`, `dual` など）

**思想**: 機能制限ではなく「理解の段階」で差別化

---

## 5. どこが「普通の変換」と違うか

### 普通の変換（例: Google翻訳のカタカナ）

- **目的**: 正しい発音の近似
- **結果**: `you` → `ユ`（短い）、`want you` → `ウォント ユー`（分離）

### SingKANA変換

- **目的**: 歌いやすさの最適化
- **結果**: `you` → `ユー`（伸ばす）、`want you` → `ワンチュ`（結合・崩し）

**違い**:
1. **母音の伸ばし方**: 歌詞では伸ばす方が自然
2. **フェイク発音の尊重**: 歌詞の崩しを反映
3. **ブレス位置の明示**: スペース区切りで視覚化
4. **記号の排除**: 歌詞には不要な記号を削除

---

## 6. 今後の尖らせ方（方向性）

### 6.1 変換結果の質

- **母音の伸ばし方**: より歌いやすい長音位置の最適化
- **子音の落とし方**: より自然な子音処理
- **ブレス位置**: より自然な区切り位置

### 6.2 UIでの「違い」の可視化

- **通常カタカナ vs SingKANA変換**: 上下比較で一目で分かる
- **説明文は不要**: 見せれば勝ち

### 6.3 無料→Proの納得感

- **無料**: 「なるほど、こう変わるのか」→ 基本変換で体験
- **Pro**: 「これじゃないと歌えない」→ 全モードで完全体験

---

## 7. 技術的実装の思想

### 7.1 レイヤー分離

1. **正規化レイヤー**: 入力の統一（改行・記号）
2. **言語判定レイヤー**: 英語/韓国語/日本語の判定
3. **変換レイヤー**: 言語ごとの変換ロジック
4. **後処理レイヤー**: スペース区切り・カタカナ統一

**思想**: 各レイヤーが独立して動作し、保守性を確保

### 7.2 エラーハンドリング

- **失敗してもサービスは落とさない**: ログ周りで例外を握りつぶす
- **デフォルト動作**: 変換失敗時は元のテキストをそのまま返す

**思想**: 可用性を最優先

---

## 8. まとめ

SingKANAの変換思想は：

1. **「正しい」より「歌える」**
2. **「厳密」より「自然」**
3. **「装飾」より「実用」**
4. **「説明」より「体験」**

これがSingKANAの魂。
